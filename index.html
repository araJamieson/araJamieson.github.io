<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">
  
  <title>Deanery map</title>


  <!-- Favicons -->
  <link href="images/favicon.png" rel="icon">


  <!-- Leaflet OpenStreetMap interface. -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
	integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
	crossorigin=""/>
    
  <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
	  integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
	  crossorigin=""></script>


  <!-- Bootstrap core CSS -->
  <script src="vendor/jquery/jquery.slim.min.js"></script>
  <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>


  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Noto+Serif:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,600,600i,700,700i" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">


  <!-- My stuff -->
  <script src="./js/churchDetails.js"></script>
  <script src="./html/showBorough.js"></script> <!-- Temporary fix for gihub limitation -- see showBorough.js. -->
  <script src="./js/local.js"></script>
  <link rel="stylesheet" href="./css/local.css">
</head>



<body onload="onLoad();">
  <!-- Navigation -->
  <nav id="navbar" class="navbar navbar-expand navbar-light c-of-e-background xfixed-top">
    <div class="navbar-header">
      <a class="navbar-brand" href="#"><img id="logo" src="./images/logo.png" alt="logo"><span id="brand"> Deanery map</span></a>
      <span class="navbar-text">&nbsp;&nbsp;
	<button class="legend" title="Hackney information" onclick="javascript:showBoroughInformation('Hackney')" style="color:lightgreen">Hackney</button>&nbsp;
	<button class="legend" title="Islington information" onclick="javascript:showBoroughInformation('Islington')" style="color:yellow">Islington</button>&nbsp;
	<button class="legend" title="Tower Hamlets information" onclick="javascript:showBoroughInformation('Tower Hamlets')" style="color:#ff8080">Tower Hamlets</button>&nbsp;
      </span>
    </div>

    <ul class="nav navbar-nav ml-auto">    
      <button class="btn" id="help-button" title="Help" onclick="javascript:showHelp()"><i class="fa fa-question"></i></button>&nbsp;
      <li>
	<div class="dropdown">
	  <button class="btn btn-secondary dropdown"
		  id="select-churches-button"
		  type="button"
		  id="dropdownMenuButton"
		  title="Select by name"
		  data-toggle="dropdown"
		  aria-haspopup="true"
		  aria-expanded="false"><i class="fa fa-bars"></i></button>
	  <ul id="menu-of-churches" class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
	    <!--<li><a class="dropdown-item" href="javascript:selectItem(1)">Select</a></li>-->
	  </ul>
	</div>
      </li>
    </ul>
  </nav>



  <!-- Page Content -->
  <div class="container-fluid">
    <div class="row">
      <div class="col-12" style="padding:0px">
	<div id="the-map" style="border-top:3px solid black; border-bottom:3px solid black;"></div>
      </div>
    </div>

    <div id="footer" class="row logo-color">
      <div class="col-12">
	<span id="accumulated-data" style="color:yellow">&nbsp;</span>
      </div>
    </div>
  </div>


  <!-- General info. -->
  <div id="general-modal" class="modal fade general-modal" role="dialog">
    <div class="modal-dialog general-modal">
      <div class="modal-content" style="border:2px solid black">
	<div class="modal-header" style="background:blue">
          <h4 class="modal-title" id="general-modal-title" style="color:white;font-size:medium;font-weight:bold"></h4>
          <button type="button" class="close" data-dismiss="modal"><span style="color:white">&times;</span></button>
	</div>
	<div class="modal-body" style="background:lightblue">
	  <iframe id="general-modal-content" style="border-style:none;width:100%"></iframe>
	</div>
      </div>
    </div>
  </div>



  <!-- Help modal. -->
  <div id="help-modal" class="modal fade" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content" style="border:2px solid black" >
	<div class="modal-header" style="background:blue">
          <h4 class="modal-title" style="color:white;font-size:medium">Help</h4>
          <button type="button" class="close" data-dismiss="modal"><span style="color:white">&times;</span></button>
	</div>
	<div class="modal-body" id="modal-body-help" style="background:lightblue">


<help-header>Overview</help-header>

<help-p>This works in much the same way as Google maps (ie you can
scroll, zoom, etc).</p>

<help-p>The icons show churches.  They are
colour-coded: <span style="color:green;font-weight:bold">GREEN</span>
for Hackney deanery, <span style="color:yellow;font-weight:bold">YELLOW</span> for
Islington, and <span style="color:#cc6699;font-weight:bold">PINK</span>
for Tower Hamlets.</help-p>

<help-p>If you click on a church, a popup will appear giving brief
details.  Items in blue on the popup are hyperlinks to pages where
more detailed information is available.  The information available
differs between the various churches, according to what I was able to
find.  Where a church has associated parish bounday information, the
parish boundary is displayed as well.</help-p>

<help-p>A church is regarded is &lsquo;selected&rsquo; once you have
displayed its popup, and it remains selected until you close the popup
(which you do by clicking on the cross at the top right).  You can
have more than one church selected at the same time.  Certain
aggregate data about the selected churches is displayed across the
bottom of the screen.  If only <em>some</em> of the selected churches
can supply the data which is being aggregated, the message at the
bottom of the screen warns that the information is incomplete.</help-p>

<help-p>The bottom row of the screen also indicates the current
version of the tool, and the date when the data it relies upon
was last updated.  If the data is more than three months old (an
arbitrary figure), you are warned that it may perhaps be time to
update it.  To this end, support details appear below.</help-p>

<help-p>If precisely two churches are selected, the bottom row shows
the crow-flies distance between them in miles.</help-p>
    
<help-p>The popup for each church includes a button which lets you
limit the display to showing only churches within a given distance of
the one you have selected.  More details appear on the prompt which
lets you specify the distance of interest.</help-p>

<help-p>The purple lozenges at the left of the menu serve both as a
legend, to indicate the meaning of the colour-coding, and also as
buttons.  The idea is that it might be possible to lodge general
information about the areas against these buttons.  I presently have
some sample data (albeit genuine, from the Office of National
Statistics).</help-p>
  

<help-header>About the data</help-header>

<help-p>The information in the tool has come from a variety of sources.</help-p>

<help-p>The basic framwork has been derived from
the <a href="https://www.london.anglican.org/directory/" target="_blank">London
Diocesan Directory</a>.</help-p>

<help-p>I have supplemented this with information from Wikipedia, with
details taken from the various church&rsquo;s own websites, and with
material derived from a number of other miscellaneous
sources.</help-p>

<help-p>The information from the Diocesan Directory should in theory
be the most reliable &mdash; although with the caveat that I have had
to try to extract this information automatically, and taking
information from web pages in this way is far from straightforward,
and relies up different pages being put together in a consistent
manner.</help-p>

<help-p>In general the information from the other websites is less
important, since most of it merely provides links to other places, and
it will be readily apparent if they are wrong.  Having said that, the
parish population information comes from Wikipedia, and I have no way
of verifying that, nor of determining if it is up to date.</help-p>

<help-p>Note that the data from the Diocesan Directory covers more
than just churches (it includes various chaplaincies, for instance).
I have removed this information from the data presented here, but if
you feel that some of it should be included (or that some of the data
which the tool actually presents should not be appearing) the list is
easily amended &mdash; support details below.</help-p>



<help-header>About the tool</help-header>

<help-p>The tool comprises an Excel spreadsheet in which I have
gathered the various pieces of information, and then a collection of
webby things, one of them derived from the tool, and the rest
hand-crafted.</help-p>

<help-p>It is possible that the spreadsheet may be useful in its own right.</help-p>

<help-p>The mapping data is all open source (ie it&rsquo;s not Google
Maps data), taken from <a href="https://www.openstreetmap.org/about"
target="_blank">OpenStreetMap</a>.  The software which turns this data
into displayable form is also open source
(<a href="https://leafletjs.com/" target="_blank">leaflet.js</a>).</help-p>

<help-p>I also rely upon software
from <a href="https://www.mapbox.com/" target="_blank">mapbox</a>.
This is <em>not</em> public domain, but they do make freely available
a public key for limited general use, and this seems to be
adequate.</help-p>

<help-p>And finally, I am indebted to one <em>jhermsmeier</em> for code to manipulate map coordinates.</help-p>



<help-header>Support</help-header>

<help-p>For help and support, contact me at $contact$.</help-p>

<help-p><span style="text-decoration:underline">&lsquo;Jamie&rsquo; Jamieson</span></help-p>

<hr>

<help-header>Version</help-header>

<help-p style="text-align:center">
Software: $softwareVersion$<br>
Data: $dataDate$</help-p>
<help-p style="color:red;visibility:$outOfDateVisibility$">WARNING: Data is more than $warnAfterDays$ days old &mdash; you may want to consider updating it.</help-p>


	</div>
      </div>
    </div>
  </div>
</body>
</html>
