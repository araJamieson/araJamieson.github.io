<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">
  
  <title>Deanery map</title>


  <!-- Favicons -->
  <link href="images/favicon.png" rel="icon">


  <!-- Leaflet OpenStreetMap interface. -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
	integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
	crossorigin=""/>
    
  <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
	  integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
	  crossorigin=""></script>


  <!-- Bootstrap core CSS -->
  <script src="vendor/jquery/jquery.slim.min.js"></script>
  <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>


  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Noto+Serif:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,600,600i,700,700i" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">


  <!-- My stuff -->
  <script src="./js/churchDetails.js"></script>
  <script src="./js/local.js"></script>
  <link rel="stylesheet" href="./css/local.css">



  <!-- Deanery stats. -->
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script type="text/javascript" src="./js/deaneryPopulationTrends.js"></script>
  <script type="text/javascript" src="./js/deaneryReligionTrends.js"></script>
  <script>
    google.charts.load('current', {'packages':['corechart']});
    google.charts.setOnLoadCallback(enableDeaneryButtons);
  </script>
</head>



<body onload="onLoad();">
  <!-- Navigation -->
  <nav id="navbar" class="navbar navbar-expand navbar-light c-of-e-background xfixed-top">
    <div class="navbar-header">
      <a class="navbar-brand" href="#"><img id="logo" src="./images/logo.png" alt="logo"><span id="brand"> Deanery map</span></a>
      <span class="navbar-text">&nbsp;&nbsp;
	<button disabled class="legend" title="Hackney information" onclick="javascript:showDeaneryInformation('Hackney')" style="color:lightPink">Hackney</button>&nbsp;
	<button disabled class="legend" title="Islington information" onclick="javascript:showDeaneryInformation('Islington')" style="color:fuchsia">Islington</button>&nbsp;
	<button disabled class="legend" title="Tower Hamlets information" onclick="javascript:showDeaneryInformation('Tower Hamlets')" style="color:yellowGreen">Tower Hamlets</button>&nbsp; &nbsp;
	<label style="color:black"><input id="show-popups" type="checkbox" onChange="showPopupsChangeHandler()"> Show popups</label>
      </span>
    </div>

    <ul class="nav navbar-nav ml-auto">    
      <button class="btn" id="help-button" title="Help" onclick="javascript:showHelp()"><i class="fa fa-question"></i></button>&nbsp;
      <li>
	<div class="dropdown">
	  <button class="btn btn-secondary dropdown"
		  id="select-churches-button"
		  type="button"
		  id="dropdownMenuButton"
		  title="Select by name"
		  data-toggle="dropdown"
		  aria-haspopup="true"
		  aria-expanded="false"><i class="fa fa-bars"></i></button>
	  <ul id="menu-of-churches" class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
	    <!--<li><a class="dropdown-item" href="javascript:selectItem(1)">Select</a></li>-->
	  </ul>
	</div>
      </li>
    </ul>
  </nav>



  <!-- Page Content -->
  <div class="container-fluid">
    <div class="row">
      <div class="col-12" style="padding:0px">
	<div id="the-map" style="border-top:3px solid black; border-bottom:3px solid black;"></div>
      </div>
    </div>

    <div id="footer" class="row logo-color">
      <div class="col-12" style="text-align:right">
	<span id="accumulated-data" style="color:yellow;text-align:right">&nbsp;</span>
      </div>
    </div>
  </div>


  <!-- General info. -->
  <div id="general-modal" class="modal fade" role="dialog" style="filter: drop-shadow(5px 5px 4px black)">
    <div class="modal-dialog general-modal">
      <div class="modal-content" style="border:2px solid black">
	<div class="modal-header" style="background:#eb5d1e">
          <h4 class="modal-title" id="general-modal-title" style="color:white;font-size:large;font-weight:bold"></h4>
          <button type="button" class="close" data-dismiss="modal" onclick="closeDeaneryModal();"><span style="color:white">&times;</span></button>
	</div>
	<div id="general-modal-body" class="modal-body modal-body-scroll" style="background:#fef8f5">
          <p style="color:red;font-size:large;text-align:center;background:yellow;padding:3px;border:solid black 1px">
            Before placing any reliance upon the data presented here, make sure you have read any caveats on this page.
          </p>

          <div id="population-chart" style="height:50vh; border:solid black 1px"></div><br>
	  
          <p>This chart is derived from <a target="_blank" rel="noopener noreferrer" href="https://data.london.gov.uk/download/trend-based-population-projections/4fc79b7a-06c3-4763-a47f-8c307302295c/Central%20trend%20population%20projection%20%282018-based%29.xlsx">https://data.london.gov.uk/download/trend-based-population-projections/4fc79b7a-06c3-4763-a47f-8c307302295c/Central trend population projection (2018-based).xlsx</a> from <a target="_blank" rel="noopener noreferrer" href="https://data.london.gov.uk/dataset">https://data.london.gov.uk/dataset</a>.  It is &copy GLA 2018-based Demographic Projections, and the data was collected in 2018.</p>

          <p style="margin-bottom:0;">Caveats:</p>
          <ul style="margin-top:0">
            <li style="margin-bottom:1em">I am not sure whether the definitions of the
              borough boundaries used in this data are necessarily
              the same as those used when defining the
              deaneries.</li>


            <li>Since the data was drawn up in 2018, it would
              seem reasonable to assume that data for 2011 would
              coincide with the census figures for 2011, available
              from the same website.  In fact there appear to be
              discrepancies of at least 10% between the two in
              some cases, and there is no obvious explanation for
              this.  This may cast some doubt on the reliability
              of the data.</li>
          </ul>
	  <br>
	  <hr style="background=black">
	  <br>
          <div id="religion-chart" style="height:50vh; border:solid black 1px"></div><br>
          <p>This chart is derived from data held by <a target="_blank" rel="noopener noreferrer" href="https://www.ons.gov.uk/">The Office for National Statistics</a>.</p>
	</div>
      </div>
    </div>
  </div>



  <!-- Help modal. -->
  <div id="help-modal" class="modal fade" role="dialog" style="filter: drop-shadow(5px 5px 4px black);">
    <div class="modal-dialog">
      <div class="modal-content" style="border:2px solid black" >
	<div class="modal-header" style="background:#eb5d1e">
          <h4 class="modal-title" style="color:white;font-size:large">Help</h4>
          <button type="button" class="close" data-dismiss="modal"><span style="color:white">&times;</span></button>
	</div>
	<div class="modal-body modal-body-scroll" id="modal-body-help" style="background:#fef8f5">


	  <help-header>Overview</help-header>

	  <help-p style="text-align:center; font-weight:bold">Tool version: $softwareVersion$; &nbsp; Data dated: $dataDate$.</help-p>

	  <help-p style="display:$outOfDateVisibility$;text-align:center;border:1px solid black;background:red;color:yellow;font-weight:bold;padding:10px;margin-bottom:10px;">
	    Data is more than $warnAfterDays$ days old.
	  </help-p>

	  <help-p>This works in much the same way as Google maps (ie you can
	    scroll, zoom, etc).</help-p>

	  <help-p>The icons show churches.  They are
	    colour-coded: <span style="color:lightPink;font-weight:bold">PINK</span>
	    for Hackney deanery, <span style="color:fuchsia;font-weight:bold">PURPLE</span> for
	    Islington, and <span style="color:yellowGreen;font-weight:bold">GREEN</span>
	    for Tower Hamlets.  Each carries an icon to indicate the type of church &mdash;
	    a candle for high church, a book for evangelical, and a handshake for liberal.
	  </help-p>

	  <help-p>If you click on a church, a popup will appear giving brief
	    details.  Items in blue on the popup are hyperlinks to pages where
	    more detailed information is available.  The information available
	    differs between the various churches, according to what I was able to
	    find.  Where a church has associated parish boundary information, the
	    parish boundary is displayed as well.</help-p>

	  <help-p>Actually, that&rsquo;s not <em>quite</em> true: the <em>Show
	      popups</em> checkbox at the top of the screen controls whether
	    popups appear or not.  This makes it possible to avoid clutting the
	    screen when the popup information is not required.</help-p>

	  <help-p>The popup for each church includes a button which lets you
	    limit the display to showing only churches within a given distance of
	    the one you have selected.  More details appear on the prompt which
	    lets you specify the distance of interest.</help-p>

	  <help-p>A church is regarded is &lsquo;selected&rsquo; once you have
	    displayed its popup, and it remains selected until you click on it
	    again (or equivalently, if the popup is visible, until you close the
	    popup by clicking on the cross at the top right).</help-p>

	  <help-p>So long as one or more churches are selected, aggregate
	    information about the churches will appear at the bottom of the page.</help-p>
	  
	  <help-p>The purple lozenges at the left of the menu bar serve both as
	    a legend, to indicate the meaning of the colour-coding, and also as
	    buttons.  The idea is that it might be possible to lodge general
	    information about the deaneries against these buttons.  I presently
	    have some sample data (albeit genuine, from the Office of National
	    Statistics).</help-p>
  

	  <help-header>About the data</help-header>

	  <help-p>The information in the tool has come from a variety of sources.</help-p>

	  <help-p>The basic framwork has been derived from
	    the <a href="https://www.london.anglican.org/directory/" target="_blank">London
	      Diocesan Directory</a>.</help-p>

	  <help-p>I have supplemented this with information from Wikipedia, with
	    details taken from the various church&rsquo;s own websites, and with
	    material derived from a number of other miscellaneous
	    sources.</help-p>

	  <help-p>The information from the Diocesan Directory should in theory
	    be the most reliable &mdash; although with the caveat that I have had
	    to try to extract this information automatically, and taking
	    information from web pages in this way is far from straightforward,
	    and relies up different pages being put together in a consistent
	    manner.</help-p>

	  <help-p>In general the information from the other websites is less
	    important, since most of it merely provides links to other places, and
	    it will be readily apparent if they are wrong.  Having said that, the
	    parish population information comes from Wikipedia, and I have no way
	    of verifying that, nor of determining if it is up to date.</help-p>

	  <help-p>Note that the data from the Diocesan Directory covers more
	    than just churches (it includes various chaplaincies, for instance).
	    I have removed this information from the data presented here, but if
	    you feel that some of it should be included (or that some of the data
	    which the tool actually presents should not be appearing) the list is
	    easily amended &mdash; support details below.</help-p>



	  <help-header>About the tool</help-header>

	  <help-p>The tool comprises an Excel spreadsheet in which I have
	    gathered the various pieces of information, and then a collection of
	    webby things, one of them derived from the tool, and the rest
	    hand-crafted.</help-p>

	  <help-p>It is possible that the spreadsheet may be useful in its own right.</help-p>

	  <help-p>The mapping data is all open source (ie it&rsquo;s not Google
	    Maps data), taken from <a href="https://www.openstreetmap.org/about"
				      target="_blank">OpenStreetMap</a>.  The software which turns this data
	    into displayable form is also open source
	    (<a href="https://leafletjs.com/" target="_blank">leaflet.js</a>).</help-p>

	  <help-p>I also rely upon software
	    from <a href="https://www.mapbox.com/" target="_blank">mapbox</a>.
	    This is <em>not</em> public domain, but they do make freely available
	    a public key for limited general use, and this seems to be
	    adequate.</help-p>

	  <help-p>And finally, I am indebted to one <em>jhermsmeier</em> for code to manipulate map coordinates.</help-p>



	  <help-header>Support</help-header>
	  
	  <help-p>For help and support, contact me at $contact$.</help-p>

	  <help-p><span style="text-decoration:underline">&lsquo;Jamie&rsquo; Jamieson</span></help-p>
	</div>
      </div>
    </div>
  </div>
</body>
</html>
